@model WebApp.Models.ProductFormViewModel
@{
    ViewData["Title"] = "Edit Product";
    var categories = (IEnumerable<Domain.Entities.Category>)ViewBag.Categories;
}
<div class="container mt-4">
    <h2>Edit Product</h2>
    <form method="post" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Product Name</label>
                <input class="form-control" asp-for="ProductName" />
                <span class="text-danger" asp-validation-for="ProductName"></span>
            </div>
            <div class="col-md-6">
                <label class="form-label">SKU</label>
                <input class="form-control" asp-for="Sku" />
                <span class="text-danger" asp-validation-for="Sku"></span>
            </div>
            <div class="col-md-4">
                <label class="form-label">Price</label>
                <input class="form-control" asp-for="Price" />
                <span class="text-danger" asp-validation-for="Price"></span>
            </div>
            <div class="col-md-4">
                <label class="form-label">Category</label>
                <select class="form-select" asp-for="CategoryId">
                    @foreach (var c in categories)
                    {
                        <option value="@c.Id" selected="@(Model.CategoryId == c.Id)">@c.Name</option>
                    }
                </select>
                <span class="text-danger" asp-validation-for="CategoryId"></span>
            </div>
            <div class="col-md-4">
                <label class="form-label">Status</label>
                <select class="form-select" asp-for="Status">
                    <option value="Active" selected="@(Model.Status == "Active")">Active</option>
                    <option value="Inactive" selected="@(Model.Status == "Inactive")">Inactive</option>
                </select>
                <span class="text-danger" asp-validation-for="Status"></span>
            </div>
            <div class="col-md-6">
                <label class="form-label">Product Photo (JPG/PNG, < 25KB)</label>
                <input type="file" class="form-control" accept=".jpg,.jpeg,.png" asp-for="PhotoFile" />
                <input type="hidden" asp-for="ExistingPhotoPath" />
                <span class="text-danger" asp-validation-for="PhotoFile"></span>
            </div>
            <div class="col-md-6">
                @if (!string.IsNullOrEmpty(Model.ExistingPhotoPath))
                {
                    <img src="@Model.ExistingPhotoPath" alt="photo" style="max-width:200px;height:auto;border:1px solid #ddd;padding:2px;" />
                }
            </div>
            <div class="col-12">
                <div class="text-danger">@Html.ValidationSummary()</div>
            </div>
        </div>
        <div class="mt-3">
            <a class="btn btn-secondary" href="/products">Cancel</a>
            <button class="btn btn-primary" type="submit">Save</button>
        </div>
    </form>
</div>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
}